# 2-5 본격적으로 컴포넌트 만들기

### 2.5.1 컴포넌트의 상태 관리하기

* 어떤 상태를 가지거나 외관상 변화하는 컴포넌트는 상태로 관리를 함

  * 상태 값이 필요
  * 컴포넌트의 state 객체 사용
  * 초기 값 설정 이후 변경시 setState() 메서드 사용 : 상태 변경 시, 자동으로 render() 메서드를 함께 호출하기 위함

  ```javascript
  [구문] 컴포넌트의 상태 초기화하기
  class <컴포넌트의 이름> extends React.Component {
    // 상태 초기화하기
    constructor (props) {
      this.state = { <초깃값> }
    }
  }
  ```

  - 값 참조 시 : this.state.<이름>
  - 값 변경 시 : this.setState() 사용

  ```Javascript
  [구문] 컴포넌트의 상태를 참조하고 변경하는 방법
  // 상태 참조하기
  console.log( this.state.<이름> )

  // 상태 변경하기
  this.setState( { <이름>: <새로운 값> })
  ```

### 2.5.2 시계 컴포넌트 만들기

```react
<div id="root"></div>
<script type="text/babel">
// 상태를 가진 시계 컴포넌트를 정의
class SClock extends React.Component {
  constructor (props) {
  	super(props)
    // 컴포넌트의 상태 초기화
    this.state = {
    now: (new Date())
    }
    // 매 초마다 상태 변경 => setState() 사용
    // setState() 호출 시 자동으로 render() 함께 실행됨
    setInterval(e => {
    this.setState({ now: (new Date()) })
    }, 1000)
  }
  // 렌더링할 내용을 반환
  render () {
    const now = this.state.now
    const hh = this.fmt(now.getHours())
    const mm = this.fmt(now.getMinutes())
    const ss = this.fmt(now.getSeconds())
    return (<div>{hh}:{mm}:{ss}</div>)
  }
  fmt (v) {
    const s = "00" + v
    return s.substr(s.length - 2, 2)
  }
}
// 컴포넌트 배치
ReactDOM.render(
  <div><SClock /></div>,
  document.getElementById('root')
)
</script>
```



# 2-6 이벤트의 구조와 구현

### 2.6.1 리액트로 클릭 이벤트를 구현하는 방법

* 일반적인 클릭 이벤트 지정 방법

  ```html
  <div onclick="clickHandler(e)">Click Me</div>
  ```

*  리액트에서 클릭 이벤트를 지정하는 방법

  ```react
  <div onClick={clickHandler}>Click Me</div>
  ```

**예제**

```react
<div id="root"></div>
<script type="text/babel">
  // 컴포넌트 정의
  class Hello extends React.Component {
    render () {
      // 이벤트를 정의
      const clickHandler = (e) => {
        window.alert('안녕하세요.')
      }
      // 클릭 이벤트를 지정
      return (
        <div onClick={clickHandler}>Click Me</div>
      )
    }
  }
  // 컴포넌트 사용
  ReactDOM.render(
    <Hello />,
    document.getElementById('root')
  )
</script>
```

**예제 - 클릭했을 때 클래스의 메서드 호출하기**

```react
<div id="root"></div>
<script type="text/babel">
  // 컴포넌트 정의
  class Hello extends React.Component {
    constructor (props) {
      super(props)
      // 이벤트 핸들러의 this를 설정
      this.clickHandler = this.clickHandler.bind(this)
    }
    clickHandler(e) {
      const name = this.props.name
      window.alert(`${name}님 안녕하세요.`)
    }
    render () {
      // 클릭 이벤트 지정
      return (
        <div onClick={this.clickHandler}>Click Me</div>
      )
    }
  }
  // 컴포넌트 사용
  ReactDOM.render(
    <Hello name="sophia" />,
    document.getElementById('root')
  )
</script>
```

