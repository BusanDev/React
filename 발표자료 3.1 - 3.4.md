# 3-1 컴포넌트의 라이프 사이클



## 3.1.1_ 컴포넌트의 라이프 사이클



### 컴포넌트 생성과 DOM에 마운트

한번만 반복됨.

- **constructor(props)** - 객체가 생성될 때
- **componentWillMount()** - 컴포넌트가 DOM에 마운트되기 직전
- **render()** - 컴포넌트가 렌더링 될 때
- **componentDidMount()** - 컴포넌트가 DOM에 마운트된 직후

### 컴포넌트 업데이트

컴포넌트가 변경되면 아래와 같은 메서드를 호출

- **componentWillReceiveProps(nextProps)** - 컴포넌트의 프로퍼티가 변경될 때(프로퍼티 변경이 없으면 호출 안 됨. 내부에서 setState()메서드호출로 컴포넌트 상태 변경가능)

- **shouldComponentUpdate(nextProps, nextState)** - 컴포넌트의 외관을 변경해도 좋을지 판단할 때

- **componentWillUpdate()** - 컴포넌트가 업데이트되기 전

- **render()** - 컴포넌트가 렌더링 될 때

- **componentDidUpdate()** - 컴포넌트가 업데이드 된 직후

  ​

### DOM에서 언마운트

컴포넌트가 DOM에서 언마운트(제거)될 때 다음과 같은 메서드가 호출 

- **componentWillUnmount()**





### 라이프사이클 확인하기

리액트 프로젝트 생성

```
$create-react-app cycle
$cd cycle
```



src/App.js 문서를 열면 아래와 같은 코드가 나오는데 2,3번째 iimport는 삭제하고  Component  내용을 바꾼다. 

```react
import React, { Component } from 'react';
import logo from './logo.svg';
import './App.css';

class App extends Component {
  render() {
    return (
      <div className="App">
        <header className="App-header">
          <img src={logo} className="App-logo" alt="logo" />
          <h1 className="App-title">Welcome to React</h1>
        </header>
        <p className="App-intro">
          To get started, edit <code>src/App.js</code> and save to reload.
        </p>
      </div>
    );
  }
}

export default App;
```



아래와 같이 변경한다. 

```react
import React, { Component } from 'react'
class App extends Component {
  // 마운트
  constructor (props) {
    super(props)
    console.log('constructor')
  }
  componentWillMount () {
    console.log('componentWillMount')
  }
  componentDidMount () {
    console.log('componentDidMount')
  }
  // 변경
  componentWillReceiveProps (nextProps) {
    console.log('componentWillReceiveProps')
  }
  shouldComponentUpdate (nextProps, nextState) {
    console.log('shouldComponentUpdate')
    return true
  }
  componentWillUpdate () {
    console.log('componentWillUpdate')
  }
  componentDidUpdate () {
    console.log('componentDidUpdate')
  }
  // 언마운트
  componentWillUnmount () {
    console.log('componentWillUnmount')
  }
  render () {
    console.log('render')
    const setStateHandler = (e) => {
      console.log('* call setState()')
      this.setState({r: Math.random()})
    }
    return (
      <div>
        <button onClick={setStateHandler}>
        setState</button>
      </div>
    )
  }
}
export default App
```



## 3.1.2_ 스톱워치 만들기



프로젝트 만들기

컴포넌트 배치

```react
import React from 'react'
import ReactDOM from 'react-dom'
import Stopwatch from './Stopwatch'

ReactDOM.render(
  <Stopwatch />,
  document.getElementById('root')
)
```



stopwatch정의

```react
import React, { Component } from 'react'
import './Stopwatch.css'
// Stopwatch 컴포넌트를 정의합니다.
class Stopwatch extends Component {
  constructor (props) {
 	super(props)
    this.state = { // 초깃값을 설정합니다. --- (※1)
      isLive: false,
      curTime: 0,
      startTime: 0
    }
    this.timerId = 0
  }
  // 마운트했을 때 --- (※2)
  componentWillMount () {
    this.timerId = setInterval(e => {
      this.tick()
    }, 1000)
  }
  // 언마운트했을 때 --- (※3)
  componentWillUnmount () {
    clearInterval(this.timerId)
  }
  // 매 초 실행됩니다. --- (※4)
  tick () {
    if (this.state.isLive) {
      const v = new Date().getTime()
      this.setState({curTime: v})
    }
  }
  // 시작/중지 버튼을 클릭했을 때 --- (※5)
  clickHandler (e) {
    // 중지할 때
    if (this.state.isLive) {
      this.setState({isLive: false})
      return
    }
    // 시작할 때
    const v = new Date().getTime()
    this.setState({
      curTime: v,
      startTime: v,
      isLive: true})
  };
  // 출력할 시계를 생성합니다. --- (※6)
  getDisp () {
    const s = this.state
    const delta = s.curTime - s.startTime
    const t = Math.floor(delta / 1000)
    const ss = t % 60
    const m = Math.floor(t / 60)
    const mm = m % 60
    const hh = Math.floor(mm / 60)
    const z = (num) => {
      const s = '00' + String(num)
      return s.substr(s.length - 2, 2)
    }
    return <span className='disp'>
      {z(hh)}:{z(mm)}:{z(ss)}
    </span>
  }
  // 화면 렌더링 --- (※7)
  render () {
    let label = 'START'
    if (this.state.isLive) {
      label = 'STOP'
    }
    const disp = this.getDisp()
    const fclick = (e) => this.clickHandler(e)
    return (<div className='Stopwatch'>
      <div>{disp}</div>
      <button onClick={fclick}>{label}</button>
    </div>)
  }
}
export default Stopwatch
```



CSS 작성

```css
.Stopwatch {
    text-align: center;
  }
  
  .disp {
    font-size: 70px;
  }
  
  button {
    font-size: 24px;
    width: 280px;
  }
  
```



# 3-2 리액트와 입력 양식



## 3.2.1_ 간단한 입력양식 만들기



## 3.2.2_ 숫자만 입력받는 텍스트 만들기



## 3.2.3_ 여러 개의 입력 항목을 가진 입력 양식 만들기





# 3-3 컴포넌트끼리 연동하기



## 3.3.1_ 컴포넌트 끼리 연동하는 방법



## 3.3.2_ inch와 cm 단위를 변환하는 컴포넌트 만들기



### 단위 변환 컴포넌트 프로그램



# 3-4 컴포넌트의 3대 요소 사용 구분



## 3.4.1_ 상태와 프로퍼티



### 상태(state)



### 프로퍼티(props)



### 이벤트 복습



## 3.4.2 색 선택 컴포넌트 만들기 
